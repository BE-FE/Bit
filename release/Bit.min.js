!function(t,r){"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?module.exports=r(t):"function"==typeof define&&define.amd?define(function(){return r(t)}):t.Bit=t.Bit||r(t)}(window?window:this,function(){function t(t,r){return new Array((r||10)-t.toString().length+1).join("0")+t}function r(r){return null==r?new Array(9).join("0"):t((r||0).toString(2),8)}function n(r){return null==r?new Array(3).join("0"):t((r||0).toString(16),2)}var i=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=function(t,r){return 8*t+r%8},s=function(t,r){this.isLittleEndian=!!r||!1,this.length=t||0,this.originalLength=0,this.bitArray=new Array(this.length/8);for(var n=0,i=this.bitArray.length;i>n;n++)this.bitArray[n]=0;this.currentByte=0,this.currentBit=0};s.version="0.1.0";var h=s.prototype;return h.isBitString=function(t){return"string"==typeof t&&!/[^01]/.test(t)},h.isBit=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"bitArray"in t&&t instanceof s},h.write=function(t){return this.isBit(t)||this.isBitString(t)?this.writeBit.apply(this,arguments):"string"==typeof t?this.writeString.apply(this,arguments):this},h.writeString=function(t){if(/^[\x00-\xff]+$/.test(t))for(var r=0,n=t.length;n>r;r++)this.writeBit(t.charAt(r).charCodeAt().toString(2),8);else for(var r=0,n=t.length;n>r;r++)this.writeBit(t.charAt(r).charCodeAt().toString(2),16);return this},h.writeInt=function(t,r){return this.writeBit.call(this,t.toString(2),r)},h.writeHex=function(t){t=t.replace(/\x20+/g,"");for(var r=0,n=t.length;n>r;r+=2)this.writeBit.call(this,parseInt(t.charAt(r)+t.charAt(r+1),16).toString(2),8);return this},h.writeBit=function(t,r){if(null==t)return this;if(!this.isBit(t)&&!this.isBitString(t))throw new TypeError("Argument 0 Must be an BitInstance OR BitString");if(this.isBit(t)&&(t=t.toBitString()),null==r&&(r=t.length),0===r)return this;r=Math.abs(r),t.length>r&&(t=t.slice(-r));for(var n,i,e,s=t.length,h=0,o=this.currentBit,u=this.currentByte;s>h;)8-o>=s-h?(i=0,e=s-h):(i=s-h-8+o,e=8-o),"undefined"==typeof this.bitArray[u]&&(this.bitArray[u]=0),n=t.substr(i,e),this.bitArray[u]&=(1<<n.length)-1<<o^255,this.bitArray[u]+=parseInt(n,2)<<o,o+n.length>7&&u++,o=(o+n.length)%8,h+=n.length;var a=this.getCurrentPointer()+r;return this.originalLength<a&&(this.originalLength=a,this.byteLength=this.bitArray.length,this.length=8*this.byteLength),this.setCurrentPointer(a),this},h.writeBitTo=function(t){switch(arguments.length){case 1:this.writeBit.apply(this,arguments);break;case 2:var r=arguments[1];i(r)&&(r=e.apply(null,r)),this.setCurrentPointer(r),this.writeBit.call(this,t),this.setCurrentPointer(this.originalLength);break;case 3:var r=arguments[1],n=arguments[2];i(r)&&(r=e.apply(null,r)),this.setCurrentPointer(r),this.writeBit.call(this,t,n),this.setCurrentPointer(this.originalLength)}return this},h.writeBitIn=function(t){switch(arguments.length){case 1:this.writeBit.apply(this,arguments);break;case 2:this.writeBitTo.apply(this,arguments);break;case 3:var r=arguments[1],n=arguments[2];i(r)&&(r=e.apply(null,r)),i(n)&&(n=e.apply(null,n)),n>r&&(this.setCurrentPointer(r),this.writeBit.call(this,t,n-r),this.setCurrentPointer(this.originalLength))}return this},h.getCurrentPointer=function(){return 8*this.currentByte+this.currentBit},h.setCurrentByte=function(t){return this.currentByte=t,this},h.setCurrentBit=function(t){return this.currentBit=t,this},h.setCurrentPointer=function(t){return i(t)?(this.currentByte=t[0],this.currentBit=t[1]):(this.currentBit=t%8,this.currentByte=(t-this.currentBit)/8),this},h.moveToBegin=function(){return this.setCurrentPointer(0)},h.moveToEnd=function(){return this.setCurrentPointer(this.originalLength)},h.nextByte=function(){return this.setCurrentByte(this.currentByte+1),this.setCurrentBit(0),this},h.getBit=function(){var t,n;switch(arguments.length){case 0:if(t=this.getCurrentPointer(),this.originalLength-t<=0)return"";n=this.originalLength-t;break;case 1:if(t=arguments[0],n=this.originalLength-t,i(t)&&(t=e.apply(null,t)),this.originalLength-t<=0)return"";this.setCurrentPointer(t);break;case 2:if(t=arguments[0],n=arguments[1],i(t)&&(t=e.apply(null,t)),this.originalLength-t<=0)return"";this.originalLength-t<n&&(n=this.originalLength-t),this.setCurrentPointer(t)}for(var s,h=this.currentByte,o=this.currentBit,u=[],a=0;n>a;)s=n-a>8-o?8-o:n-a,u.push(r(this.bitArray[h]).substr(8-s-o,s)),o+s>7&&h++,o=(o+s)%8,a+=s;return u.reverse().join("")},h.getBitBetween=function(){},h.getInt8=function(){},h.getUint8=function(t){if(null==t&&(t=this.getCurrentPointer()),this.originalLength-t<8)throw new RangeError("Unable to meet Uint8, at least 8 bits");return console.log(parseInt(this.getBit(t,8),2)),new Uint8Array([parseInt(this.getBit(t,8),2)])},h.getInt16=function(){},h.getUint16=function(t){if(null==t&&(t=this.getCurrentPointer()),this.originalLength-t<16)throw new RangeError("Unable to meet Uint16, at least 16 bits");return new Uint16Array([parseInt(this.getBit(t,16),2)])},h.getInt32=function(){},h.getUint32=function(t){if(null==t&&(t=this.getCurrentPointer()),this.originalLength-t<32)throw new RangeError("Unable to meet Uint32, at least 32 bits");return new Uint32Array([parseInt(this.getBit(t,32),2)])},h.toBitString=function(){for(var t=[].concat(this.bitArray),n=0,i=t.length;i>n;n++)t[n]=n==i-1?t[n].toString(2):r(t[n]);return t.join("")},h.toBuffer=function(){},h.toArrayBuffer=function(){},h.toBinary=function(){var t=[].concat(this.bitArray);this.isLittleEndian&&t.reverse();for(var r=0,n=t.length;n>r;r++)t[r]=String.fromCharCode(t[r]);return t.join("")},h.toHex=function(){for(var t=[].concat(this.bitArray),r=0,i=t.length;i>r;r++)t[r]=n(t[r]);return t.join("")},h.toDebug=function(t,n){n=n||4;this.toString();t=t||1;var i=[].concat(this.bitArray);this.isLittleEndian&&(i.reverse(),this.currentByte=i.length-this.currentByte-1),i.length%n!==0&&(i=i.concat(new Array(n-i.length%n+1)));var e="\n",s="",h="",o="",u="",a="",g=!1;1&t&&(e+="  Bit "+new Array(67).join(" ")),2&t&&(e+="   U8 "),4&t&&(e+="   U16"),e+="\n",1&t&&(e+=new Array(5).join("  |-------------| "))+" ",2&t&&(e+="      "),4&t&&(e+="      "),e+="\n";for(var l=0,c=i.length;c>l;l++){if((l+1)%n===0&&(g=!0),1&t){s+=this.currentByte===l?"[":this.currentByte+1===l?"]":" ";var f=" "+(null!=i[l]?r(i[l]).split("").join(" "):new Array(16).join(" "))+" ";this.currentByte===l?(f=f.split(""),f[15-2*this.currentBit-1]=">",f[15-2*this.currentBit+1]="<",f=f.join(""),s+=f,g&&(s+="]")):(s+=f,g&&(s+=" "))}if(2&t&&(o+=r(i[l]),8===o.length)){var y=parseInt(o,2);h+=y>32&&127>y?String.fromCharCode(y):".",o=""}if(4&t&&(a+=r(i[l]),16===a.length)){a=a.slice(8)+a.slice(0,8);var y=parseInt(a,2);u+=y>2048&&65535>y?String.fromCharCode(y):"..",a=""}g&&(1&t&&(e+=s,s=""),2&t&&(e+="  "+h,h=""),4&t&&(e+="  "+u,u=""),e+="\n"),g=!1}return e+="\n"},h.debug=function(t){t=t||1;var r=console.log.bind(console);return r(this.toString()+"\n ----------------------------------\n"+this.toDebug(t)),this},s.fromHex=function(t){return new s.writeHex(t)},s.fromBuffer=function(){},s.wrap=function(){},s});